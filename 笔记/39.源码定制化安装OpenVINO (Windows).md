

# 源码定制化安装OpenVINO (Windows)

## Windows 环境配置



1) 先装好：
- Visual Studio 2022（含 Desktop development with C++ 工作负载）
- CMake
- Python 3.10/3.11 + pip
- Git for Windows

2) 环境准备
- 打开 “x64 Native Tools Command Prompt for VS 2022” 或在 VS 开发者命令行中操作。
- 克隆源码并切到稳定标签：
```bat
git clone --recursive https://github.com/openvinotoolkit/openvino.git
cd openvino
git fetch --tags
for /f "tokens=*" %i in ('git tag -l "2024.*" ^| sort') do set LATEST=%i
git checkout -B build-%LATEST% %LATEST%
git submodule update --init --recursive
```

3) CMake 配置与构建（Release）

```bat
python -m venv my_venv
.\my_venv\Scripts\activate.bat

cmake -S . -B build -G "Visual Studio 17 2022" -A x64 -DCMAKE_BUILD_TYPE=Release -DENABLE_INTEL_CPU=ON -DENABLE_INTEL_GPU=ON -DENABLE_INTEL_GNA=ON -DENABLE_MYRIAD=ON -DENABLE_AUTO=ON -DENABLE_MULTI=ON -DENABLE_HETERO=ON -DENABLE_SAMPLES=ON -DENABLE_TOOLS=ON -DENABLE_PYTHON=ON
  
cmake -S . -B build -G "Visual Studio 17 2022" -A x64 ^
  -DCMAKE_BUILD_TYPE=Release ^
  -DENABLE_INTEL_CPU=ON ^
  -DENABLE_INTEL_GPU=ON ^
  -DENABLE_INTEL_GNA=ON ^
  -DENABLE_MYRIAD=ON ^
  -DENABLE_AUTO=ON -DENABLE_MULTI=ON -DENABLE_HETERO=ON ^
  -DENABLE_SAMPLES=ON -DENABLE_TOOLS=ON -DENABLE_PYTHON=ON ^
  -DCMAKE_POLICY_VERSION_MINIMUM=3.5

cmake --build build --config Release
cmake --install build --config Release --prefix "D:/Projects/openvino"
```

4) 运行前设置
```bat
call C:\openvino\setupvars.bat
C:\openvino\samples_bin\hello_query_device.exe
C:\openvino\tools\benchmark\benchmark_app.exe -m squeezenet1.1.onnx -d CPU
```

五、常见问题排查
- cmake 找不到 Python：用 -DPYTHON_EXECUTABLE=$(which python) 或在 Windows 选定正确 Python。

附：常用 CMake 开关速查
- 设备插件：ENABLE_INTEL_CPU / ENABLE_INTEL_GPU / ENABLE_INTEL_GNA / ENABLE_MYRIAD / ENABLE_AUTO / ENABLE_MULTI / ENABLE_HETERO / ENABLE_TEMPLATE
- 生态前端：通常默认开启（ONNX/TF/TFLite/Paddle/IR），不需手动设置
- 组件：ENABLE_SAMPLES / ENABLE_TOOLS / ENABLE_PYTHON / ENABLE_TESTS / ENABLE_FUNCTIONAL_TESTS / ENABLE_DOCS
